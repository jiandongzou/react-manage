const Q=t=>typeof t=="object"&&t!=null&&t.nodeType===1,U=(t,n)=>(!n||t!=="hidden")&&t!=="visible"&&t!=="clip",A=(t,n)=>{if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){const s=getComputedStyle(t,null);return U(s.overflowY,n)||U(s.overflowX,n)||(h=>{const c=(i=>{if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}})(h);return!!c&&(c.clientHeight<h.scrollHeight||c.clientWidth<h.scrollWidth)})(t)}return!1},X=(t,n,s,h,c,i,f,o)=>i<t&&f>n||i>t&&f<n?0:i<=t&&o<=s||f>=n&&o>=s?i-t-h:f>n&&o<s||i<t&&o>s?f-n+c:0,$=t=>{const n=t.parentElement;return n??(t.getRootNode().host||null)},tt=(t,n)=>{var s,h,c,i;if(typeof document>"u")return[];const{scrollMode:f,block:o,inline:u,boundary:Y,skipOverflowHiddenElements:Z}=n,_=typeof Y=="function"?Y:v=>v!==Y;if(!Q(t))throw new TypeError("Invalid target");const F=document.scrollingElement||document.documentElement,y=[];let l=t;for(;Q(l)&&_(l);){if(l=$(l),l===F){y.push(l);break}l!=null&&l===document.body&&A(l)&&!A(document.documentElement)||l!=null&&A(l,Z)&&y.push(l)}const m=(h=(s=window.visualViewport)==null?void 0:s.width)!=null?h:innerWidth,p=(i=(c=window.visualViewport)==null?void 0:c.height)!=null?i:innerHeight,{scrollX:w,scrollY:W}=window,{height:H,width:b,top:E,right:j,bottom:N,left:M}=t.getBoundingClientRect();let r=o==="start"||o==="nearest"?E:o==="end"?N:E+H/2,d=u==="center"?M+b/2:u==="end"?j:M;const O=[];for(let v=0;v<y.length;v++){const e=y[v],{height:x,width:I,top:C,right:q,bottom:z,left:R}=e.getBoundingClientRect();if(f==="if-needed"&&E>=0&&M>=0&&N<=p&&j<=m&&E>=C&&N<=z&&M>=R&&j<=q)return O;const T=getComputedStyle(e),V=parseInt(T.borderLeftWidth,10),k=parseInt(T.borderTopWidth,10),B=parseInt(T.borderRightWidth,10),D=parseInt(T.borderBottomWidth,10);let a=0,g=0;const L="offsetWidth"in e?e.offsetWidth-e.clientWidth-V-B:0,S="offsetHeight"in e?e.offsetHeight-e.clientHeight-k-D:0,G="offsetWidth"in e?e.offsetWidth===0?0:I/e.offsetWidth:0,J="offsetHeight"in e?e.offsetHeight===0?0:x/e.offsetHeight:0;if(F===e)a=o==="start"?r:o==="end"?r-p:o==="nearest"?X(W,W+p,p,k,D,W+r,W+r+H,H):r-p/2,g=u==="start"?d:u==="center"?d-m/2:u==="end"?d-m:X(w,w+m,m,V,B,w+d,w+d+b,b),a=Math.max(0,a+W),g=Math.max(0,g+w);else{a=o==="start"?r-C-k:o==="end"?r-z+D+S:o==="nearest"?X(C,z,x,k,D+S,r,r+H,H):r-(C+x/2)+S/2,g=u==="start"?d-R-V:u==="center"?d-(R+I/2)+L/2:u==="end"?d-q+B+L:X(R,q,I,V,B+L,d,d+b,b);const{scrollLeft:K,scrollTop:P}=e;a=Math.max(0,Math.min(P+a/J,e.scrollHeight-x/J+S)),g=Math.max(0,Math.min(K+g/G,e.scrollWidth-I/G+L)),r+=P-a,d+=K-g}O.push({el:e,top:a,left:g})}return O};export{tt as l};
