function D(r){for(var i=[],e=0;e<r.length;){var t=r[e];if(t==="*"||t==="+"||t==="?"){i.push({type:"MODIFIER",index:e,value:r[e++]});continue}if(t==="\\"){i.push({type:"ESCAPED_CHAR",index:e++,value:r[e++]});continue}if(t==="{"){i.push({type:"OPEN",index:e,value:r[e++]});continue}if(t==="}"){i.push({type:"CLOSE",index:e,value:r[e++]});continue}if(t===":"){for(var f="",n=e+1;n<r.length;){var u=r.charCodeAt(n);if(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||u===95){f+=r[n++];continue}break}if(!f)throw new TypeError("Missing parameter name at ".concat(e));i.push({type:"NAME",index:e,value:f}),e=n;continue}if(t==="("){var x=1,d="",n=e+1;if(r[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<r.length;){if(r[n]==="\\"){d+=r[n++]+r[n++];continue}if(r[n]===")"){if(x--,x===0){n++;break}}else if(r[n]==="("&&(x++,r[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));d+=r[n++]}if(x)throw new TypeError("Unbalanced pattern at ".concat(e));if(!d)throw new TypeError("Missing pattern at ".concat(e));i.push({type:"PATTERN",index:e,value:d}),e=n;continue}i.push({type:"CHAR",index:e,value:r[e++]})}return i.push({type:"END",index:e,value:""}),i}function M(r,i){i===void 0&&(i={});for(var e=D(r),t=i.prefixes,f=t===void 0?"./":t,n="[^".concat(s(i.delimiter||"/#?"),"]+?"),u=[],x=0,d=0,l="",c=function(o){if(d<e.length&&e[d].type===o)return e[d++].value},m=function(o){var E=c(o);if(E!==void 0)return E;var h=e[d],N=h.type,P=h.index;throw new TypeError("Unexpected ".concat(N," at ").concat(P,", expected ").concat(o))},T=function(){for(var o="",E;E=c("CHAR")||c("ESCAPED_CHAR");)o+=E;return o};d<e.length;){var w=c("CHAR"),C=c("NAME"),R=c("PATTERN");if(C||R){var p=w||"";f.indexOf(p)===-1&&(l+=p,p=""),l&&(u.push(l),l=""),u.push({name:C||x++,prefix:p,suffix:"",pattern:R||n,modifier:c("MODIFIER")||""});continue}var v=w||c("ESCAPED_CHAR");if(v){l+=v;continue}l&&(u.push(l),l="");var y=c("OPEN");if(y){var p=T(),A=c("NAME")||"",a=c("PATTERN")||"",g=T();m("CLOSE"),u.push({name:A||(a?x++:""),pattern:A&&!a?n:a,prefix:p,suffix:g,modifier:c("MODIFIER")||""});continue}m("END")}return u}function s(r){return r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function O(r){return r&&r.sensitive?"":"i"}function H(r,i){if(!i)return r;for(var e=/\((?:\?<(.*?)>)?(?!\?)/g,t=0,f=e.exec(r.source);f;)i.push({name:f[1]||t++,prefix:"",suffix:"",modifier:"",pattern:""}),f=e.exec(r.source);return r}function I(r,i,e){var t=r.map(function(f){return b(f,i,e).source});return new RegExp("(?:".concat(t.join("|"),")"),O(e))}function S(r,i,e){return _(M(r,e),i,e)}function _(r,i,e){e===void 0&&(e={});for(var t=e.strict,f=t===void 0?!1:t,n=e.start,u=n===void 0?!0:n,x=e.end,d=x===void 0?!0:x,l=e.encode,c=l===void 0?function(P){return P}:l,m=e.delimiter,T=m===void 0?"/#?":m,w=e.endsWith,C=w===void 0?"":w,R="[".concat(s(C),"]|$"),p="[".concat(s(T),"]"),v=u?"^":"",y=0,A=r;y<A.length;y++){var a=A[y];if(typeof a=="string")v+=s(c(a));else{var g=s(c(a.prefix)),o=s(c(a.suffix));if(a.pattern)if(i&&i.push(a),g||o)if(a.modifier==="+"||a.modifier==="*"){var E=a.modifier==="*"?"?":"";v+="(?:".concat(g,"((?:").concat(a.pattern,")(?:").concat(o).concat(g,"(?:").concat(a.pattern,"))*)").concat(o,")").concat(E)}else v+="(?:".concat(g,"(").concat(a.pattern,")").concat(o,")").concat(a.modifier);else a.modifier==="+"||a.modifier==="*"?v+="((?:".concat(a.pattern,")").concat(a.modifier,")"):v+="(".concat(a.pattern,")").concat(a.modifier);else v+="(?:".concat(g).concat(o,")").concat(a.modifier)}}if(d)f||(v+="".concat(p,"?")),v+=e.endsWith?"(?=".concat(R,")"):"$";else{var h=r[r.length-1],N=typeof h=="string"?p.indexOf(h[h.length-1])>-1:h===void 0;f||(v+="(?:".concat(p,"(?=").concat(R,"))?")),N||(v+="(?=".concat(p,"|").concat(R,")"))}return new RegExp(v,O(e))}function b(r,i,e){return r instanceof RegExp?H(r,i):Array.isArray(r)?I(r,i,e):S(r,i,e)}export{b as p};
